<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">

<!-- iOSã§ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚’æ¶ˆã™ãŸã‚ã®æœ€é‡è¦è¨­å®š -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Alert">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">

<title>Alert Apps</title>

<style>
/* ===== åŸºæœ¬ ===== */
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  height:100vh;
  overflow:hidden;
  background:#000;
  padding-top:env(safe-area-inset-top);
}

/* ===== ãƒ›ãƒ¼ãƒ  ===== */
.home{
  position:absolute; inset:0;
  padding:40px 20px;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:18px;
  background:
    radial-gradient(circle at 20% 10%, #2e86de, transparent 40%),
    radial-gradient(circle at 80% 30%, #6c5ce7, transparent 45%),
    linear-gradient(180deg,#0a3d62,#1e5799);
}
.icon{ text-align:center; color:#fff; font-size:12px; }
.appIcon{
  width:60px;height:60px;margin:auto;border-radius:14px;
}
.alertIcon{ background:linear-gradient(135deg,#ff3b30,#ff9f0a); }
.touchIcon{ background:linear-gradient(135deg,#ff0000,#7f0000); }
.settingsIcon{ background:linear-gradient(135deg,#8e8e93,#3a3a3c); }

/* ===== ã‚¢ãƒ—ãƒªç”»é¢ ===== */
.appView{
  position:absolute; inset:0;
  background:#000; color:#fff;
  display:none; padding:20px;
}
h1{ font-size:20px; margin:0 0 14px; }
label{ font-size:13px; color:#b0b0b0; display:block; margin-top:14px; }
input,textarea{
  width:100%; background:#1c1c1e; color:#fff;
  border:0; border-radius:10px;
  padding:10px; font-size:15px;
}
textarea{ resize:none; height:70px; }
.btn{
  margin-top:16px; width:100%;
  padding:14px; border-radius:14px;
  border:0; font-size:17px;
  background:#0a84ff; color:#fff;
}

/* ===== iOSé¢¨ã‚¢ãƒ©ãƒ¼ãƒˆ ===== */
.overlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,.36);
  backdrop-filter: blur(14px) saturate(1.2);
  display:none; align-items:center; justify-content:center;
  z-index:20;
}
.alert{
  width:270px; border-radius:14px;
  background:#f2f2f7; text-align:center;
  overflow:hidden;
}
.alert h3{ margin:16px 16px 6px; font-size:17px; }
.alert p{ margin:0 16px 14px; font-size:13.5px; color:#3a3a3c; }
.buttons{ display:flex; border-top:1px solid #c6c6c8; }
.buttons button{
  flex:1; padding:12px 0;
  border:0; background:transparent;
  font-size:17px; color:#007aff; font-weight:600;
}

/* ===== ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ ===== */
.homeBtn{
  position:fixed;
  right:14px; top:50%;
  transform:translateY(-50%);
  width:48px; height:48px;
  border-radius:50%;
  background:rgba(60,60,67,.6);
  backdrop-filter: blur(8px);
  display:flex; align-items:center; justify-content:center;
  font-size:22px; color:#fff;
  z-index:30;
}

/* ===== ã‚¢ãƒ—ãƒªã‚¹ã‚¤ãƒƒãƒãƒ£ãƒ¼ ===== */
#switcher{
  position:fixed; inset:0;
  background:rgba(0,0,0,.35);
  backdrop-filter: blur(20px);
  display:none; align-items:center; justify-content:center;
  z-index:25;
}
.cards{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:22px;
  width:90%;
}
.card{
  aspect-ratio:4/3;
  background:#000;
  border-radius:18px;
}
.card span{
  display:block;
  margin-top:-28px;
  text-align:center;
  color:#fff;
  font-size:14px;
}

/* ===== æ˜ã‚‹ã• ===== */
#brightnessOverlay{
  position:fixed; inset:0;
  background:#000;
  pointer-events:none;
  opacity:0;
  z-index:100;
}

/* ===== iOSã‚¹ã‚¤ãƒƒãƒ ===== */
.iosSwitch{
  width:52px; height:32px; position:relative; margin-top:6px;
}
.iosSwitch input{ display:none; }
.slider{
  position:absolute; inset:0;
  background:#3a3a3c;
  border-radius:32px;
  transition:.25s;
}
.slider:before{
  content:"";
  position:absolute;
  width:28px;height:28px;
  left:2px;top:2px;
  background:#fff;border-radius:50%;
  transition:.25s;
}
.iosSwitch input:checked + .slider{
  background:#34c759;
}
.iosSwitch input:checked + .slider:before{
  transform:translateX(20px);
}
</style>
</head>

<body>

<!-- ãƒ›ãƒ¼ãƒ  -->
<div class="home" id="home">
  <div class="icon" onclick="openAlertApp()">
    <div class="appIcon alertIcon"></div>ã‚¢ãƒ©ãƒ¼ãƒˆ
  </div>
  <div class="icon" onclick="openTouchApp()">
    <div class="appIcon touchIcon"></div>ã‚¿ãƒƒãƒã‚¢ãƒ©ãƒ¼ãƒˆ
  </div>
  <div class="icon" onclick="openSettings()">
    <div class="appIcon settingsIcon"></div>è¨­å®š
  </div>
</div>

<!-- ã‚¿ãƒƒãƒã‚¢ãƒ©ãƒ¼ãƒˆ -->
<div class="appView" id="touchApp">
  <h1>ã‚¿ãƒƒãƒã‚¢ãƒ©ãƒ¼ãƒˆ</h1>
  <button class="btn" onclick="danger()">ğŸš« æŠ¼ã™ãª</button>
</div>

<!-- è¨­å®š -->
<div class="appView" id="settingsApp">
  <h1>è¨­å®š</h1>

  <label>ã‚¿ãƒƒãƒã‚¢ãƒ©ãƒ¼ãƒˆã®éŸ³é‡</label>
  <input type="range" min="0" max="100" value="70" id="volumeRange">

  <label>æ˜ã‚‹ã•</label>
  <input type="range" min="10" max="100" value="100" id="brightnessRange">

  <label>å…¨ç”»é¢è¡¨ç¤º</label>
  <div class="iosSwitch">
    <input type="checkbox" id="fullscreenToggle">
    <span class="slider"></span>
  </div>
</div>

<!-- ã‚¢ãƒ©ãƒ¼ãƒˆ -->
<div class="overlay" id="ov">
  <div class="alert">
    <h3>è­¦å‘Š</h3>
    <p>ãƒœã‚¿ãƒ³ã‚’æŠ¼ã•ãªã„ã§ãã ã•ã„</p>
    <div class="buttons">
      <button onclick="stopAll()">OK</button>
    </div>
  </div>
</div>

<!-- ã‚¹ã‚¤ãƒƒãƒãƒ£ãƒ¼ -->
<div id="switcher">
  <div class="cards" id="cards"></div>
</div>

<div class="homeBtn" onclick="homeTap()">ğŸ”˜</div>
<div id="brightnessOverlay"></div>

<script>
/* ===== çŠ¶æ…‹ ===== */
let runningApps={touch:false,settings:false};
let lastTap=0;

/* ===== ãƒ›ãƒ¼ãƒ æ“ä½œ ===== */
function goHome(){
  document.querySelectorAll('.appView').forEach(v=>v.style.display="none");
  ov.style.display="none";
  switcher.style.display="none";
  home.style.display="grid";
}

function homeTap(){
  const now=Date.now();
  if(now-lastTap<350){ openSwitcher(); lastTap=0; }
  else{ goHome(); lastTap=now; }
}

/* ===== ã‚¢ãƒ—ãƒªèµ·å‹• ===== */
function openAlertApp(){}
function openTouchApp(){
  home.style.display="none";
  touchApp.style.display="block";
  runningApps.touch=true;
}
function openSettings(){
  home.style.display="none";
  settingsApp.style.display="block";
  runningApps.settings=true;
}

/* ===== ã‚¹ã‚¤ãƒƒãƒãƒ£ãƒ¼ ===== */
function openSwitcher(){
  cards.innerHTML="";
  if(runningApps.touch)
    cards.innerHTML+=`<div class="card" onclick="openTouchApp()"><span>ã‚¿ãƒƒãƒã‚¢ãƒ©ãƒ¼ãƒˆ</span></div>`;
  if(runningApps.settings)
    cards.innerHTML+=`<div class="card" onclick="openSettings()"><span>è¨­å®š</span></div>`;
  home.style.display="none";
  switcher.style.display="flex";
}

/* ===== ã‚¿ãƒƒãƒã‚¢ãƒ©ãƒ¼ãƒˆ ===== */
let audioCtx,osc,timer,gainVal=.7;
volumeRange.oninput=()=>gainVal=volumeRange.value/100;

function danger(){
  goHome();
  startSiren();
  setTimeout(()=>ov.style.display="flex",80);
}
function startSiren(){
  audioCtx=new AudioContext();
  osc=audioCtx.createOscillator();
  const g=audioCtx.createGain();
  g.gain.value=gainVal;
  osc.type="sawtooth";
  osc.connect(g); g.connect(audioCtx.destination);
  osc.start();
  let up=true;
  timer=setInterval(()=>{
    osc.frequency.setValueAtTime(up?880:440,audioCtx.currentTime);
    up=!up;
  },300);
}
function stopAll(){
  ov.style.display="none";
  clearInterval(timer);
  osc?.stop(); audioCtx?.close();
}

/* ===== æ˜ã‚‹ã• ===== */
brightnessRange.oninput=()=>{
  brightnessOverlay.style.opacity=1-brightnessRange.value/100;
};

/* ===== å…¨ç”»é¢ ===== */
fullscreenToggle.onchange=()=>{
  fullscreenToggle.checked
    ? document.documentElement.requestFullscreen?.()
    : document.exitFullscreen?.();
};
document.addEventListener("fullscreenchange",()=>{
  fullscreenToggle.checked=!!document.fullscreenElement;
});

/* Safariç”¨ãƒ„ãƒ¼ãƒ«ãƒãƒ¼æœ€å°åŒ– */
window.addEventListener("load",()=>{
  setTimeout(()=>window.scrollTo(0,1),50);
});
</script>

</body>
</html>
