<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>Mini iOS</title>

<style>
/* ===== å…¨ä½“ ===== */
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#000;
  color:#fff;
  height:100vh;
  overflow:hidden;
}

/* ===== ãƒ›ãƒ¼ãƒ  ===== */
#home{
  position:absolute;
  inset:0;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:18px;
  padding:40px 20px;
  background:linear-gradient(180deg,#0a3d62,#1e5799);
}
.icon{
  text-align:center;
  font-size:12px;
}
.appIcon{
  width:60px;
  height:60px;
  margin:auto;
  border-radius:14px;
  background:#1c1c1e;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
}

/* ===== ã‚¢ãƒ—ãƒªç”»é¢ ===== */
.app{
  position:absolute;
  inset:0;
  display:none;
  padding:20px;
  background:#000;
}
h1{
  margin:0 0 20px;
  font-size:20px;
}

/* ===== ğŸ”˜ ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ ===== */
#homeBtn{
  position:fixed;
  right:18px;
  top:50%;
  transform:translateY(-50%);
  width:52px;
  height:52px;
  border:none;
  background:transparent;
  font-size:32px;
  line-height:52px;
  text-align:center;
  z-index:9999;
}
#homeBtn:active{
  opacity:0.6;
}

/* ===== é›»å“ ===== */
.calc{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:8px;
}
.calc button{
  padding:16px;
  font-size:18px;
  border-radius:10px;
  border:none;
}
.calc input{
  width:100%;
  font-size:32px;
  text-align:right;
  margin-bottom:10px;
}
</style>
</head>

<body>

<!-- ===== ãƒ›ãƒ¼ãƒ  ===== -->
<div id="home">
  <div class="icon" onclick="openApp('clock')">
    <div class="appIcon">ğŸ•’</div>æ™‚è¨ˆ
  </div>
  <div class="icon" onclick="openApp('calc')">
    <div class="appIcon">â•</div>è¨ˆç®—æ©Ÿ
  </div>
  <div class="icon" onclick="openApp('compass')">
    <div class="appIcon">ğŸ§­</div>ã‚³ãƒ³ãƒ‘ã‚¹
  </div>
  <div class="icon" onclick="openApp('mic')">
    <div class="appIcon">ğŸ¤</div>ãƒ›ãƒ¼ãƒ«ãƒã‚¤ã‚¯
  </div>
</div>

<!-- ===== æ™‚è¨ˆ ===== -->
<div class="app" id="clock">
  <h1>æ™‚è¨ˆ</h1>
  <div id="time" style="font-size:48px;margin-top:40px;"></div>
</div>

<!-- ===== è¨ˆç®—æ©Ÿï¼ˆå®Œå…¨ç‰ˆï¼‰ ===== -->
<div class="app" id="calc">
  <h1>è¨ˆç®—æ©Ÿ</h1>

  <input id="calcDisp" readonly>

  <div class="calc">
    <button onclick="c()">C</button>
    <button onclick="p('%')">%</button>
    <button onclick="p('/')">Ã·</button>
    <button onclick="p('*')">Ã—</button>

    <button onclick="p('7')">7</button>
    <button onclick="p('8')">8</button>
    <button onclick="p('9')">9</button>
    <button onclick="p('-')">âˆ’</button>

    <button onclick="p('4')">4</button>
    <button onclick="p('5')">5</button>
    <button onclick="p('6')">6</button>
    <button onclick="p('+')">ï¼‹</button>

    <button onclick="p('1')">1</button>
    <button onclick="p('2')">2</button>
    <button onclick="p('3')">3</button>
    <button onclick="eq()">ï¼</button>

    <button onclick="p('0')" style="grid-column:span 2">0</button>
    <button onclick="p('.')">.</button>
  </div>
</div>

<!-- ===== ã‚³ãƒ³ãƒ‘ã‚¹ ===== -->
<div class="app" id="compass">
  <h1>ã‚³ãƒ³ãƒ‘ã‚¹</h1>
  <div id="deg" style="font-size:36px;margin-top:40px;">0Â°</div>
</div>

<!-- ===== ãƒ›ãƒ¼ãƒ«ãƒã‚¤ã‚¯ ===== -->
<div class="app" id="mic">
  <h1>ãƒ›ãƒ¼ãƒ«ãƒã‚¤ã‚¯</h1>
  <button onclick="startEcho()">ğŸ¤ é–‹å§‹</button>
</div>

<!-- ===== ğŸ”˜ ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ ===== -->
<button id="homeBtn" onclick="goHome()">ğŸ”˜</button>

<script>
/* ===== ç”»é¢åˆ‡æ›¿ ===== */
function openApp(id){
  home.style.display="none";
  document.querySelectorAll(".app").forEach(a=>a.style.display="none");
  document.getElementById(id).style.display="block";
}
function goHome(){
  document.querySelectorAll(".app").forEach(a=>a.style.display="none");
  home.style.display="grid";
}

/* ===== æ™‚è¨ˆ ===== */
setInterval(()=>{
  time.textContent = new Date().toLocaleTimeString("ja-JP");
},1000);

/* ===== é›»å“ ===== */
function p(v){
  calcDisp.value += v;
}
function c(){
  calcDisp.value = "";
}
function eq(){
  try{
    calcDisp.value = eval(calcDisp.value);
  }catch{
    calcDisp.value = "ã‚¨ãƒ©ãƒ¼";
  }
}

/* ===== ã‚³ãƒ³ãƒ‘ã‚¹ ===== */
if(window.DeviceOrientationEvent){
  window.addEventListener("deviceorientation",e=>{
    deg.textContent = Math.round(e.alpha || 0) + "Â°";
  });
}

/* ===== ãƒ›ãƒ¼ãƒ«ãƒã‚¤ã‚¯ï¼ˆã‚¨ã‚³ãƒ¼100%ï¼‰ ===== */
async function startEcho(){
  const ctx = new AudioContext();
  const stream = await navigator.mediaDevices.getUserMedia({audio:true});
  const mic = ctx.createMediaStreamSource(stream);

  const delay = ctx.createDelay();
  delay.delayTime.value = 0.35;

  const gain = ctx.createGain();
  gain.gain.value = 0.95;

  mic.connect(delay);
  delay.connect(gain);
  gain.connect(delay);
  delay.connect(ctx.destination);
}
</script>

</body>
</html>
