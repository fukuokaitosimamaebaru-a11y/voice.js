<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>Mini iOS</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#000;
  color:#fff;
  height:100vh;
  overflow:hidden;
}

/* ===== ãƒ›ãƒ¼ãƒ  ===== */
#home{
  position:absolute; inset:0;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:18px;
  padding:40px 20px;
  background:linear-gradient(180deg,#0a3d62,#1e5799);
}
.icon{
  text-align:center;
  font-size:12px;
}
.appIcon{
  width:60px;height:60px;
  margin:auto;
  border-radius:14px;
  background:#1c1c1e;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
}

/* ===== ã‚¢ãƒ—ãƒªç”»é¢ ===== */
.app{
  position:absolute; inset:0;
  display:none;
  padding:20px;
  background:#000;
}
h1{margin:0 0 20px;font-size:20px;}
.back{
  position:absolute; top:12px; left:12px;
  font-size:16px;
  color:#0a84ff;
}
button{
  padding:12px;
  border-radius:12px;
  border:none;
  font-size:16px;
}
</style>
</head>

<body>

<!-- ===== ãƒ›ãƒ¼ãƒ  ===== -->
<div id="home">
  <div class="icon" onclick="openApp('clock')">
    <div class="appIcon">ğŸ•’</div>æ™‚è¨ˆ
  </div>
  <div class="icon" onclick="openApp('calc')">
    <div class="appIcon">â•</div>è¨ˆç®—æ©Ÿ
  </div>
  <div class="icon" onclick="openApp('compass')">
    <div class="appIcon">ğŸ§­</div>ã‚³ãƒ³ãƒ‘ã‚¹
  </div>
  <div class="icon" onclick="openApp('mic')">
    <div class="appIcon">ğŸ¤</div>ãƒ›ãƒ¼ãƒ«ãƒã‚¤ã‚¯
  </div>
</div>

<!-- ===== æ™‚è¨ˆ ===== -->
<div class="app" id="clock">
  <div class="back" onclick="goHome()">ãƒ›ãƒ¼ãƒ </div>
  <h1>æ™‚è¨ˆ</h1>
  <div id="time" style="font-size:48px;margin-top:40px;"></div>
</div>

<!-- ===== è¨ˆç®—æ©Ÿ ===== -->
<div class="app" id="calc">
  <div class="back" onclick="goHome()">ãƒ›ãƒ¼ãƒ </div>
  <h1>è¨ˆç®—æ©Ÿ</h1>
  <input id="calcDisp" readonly style="width:100%;font-size:28px;text-align:right;">
  <div style="margin-top:10px;">
    <button onclick="add('7')">7</button>
    <button onclick="add('8')">8</button>
    <button onclick="add('9')">9</button>
    <button onclick="add('+')">+</button>
    <button onclick="add('=')">=</button>
  </div>
</div>

<!-- ===== ã‚³ãƒ³ãƒ‘ã‚¹ ===== -->
<div class="app" id="compass">
  <div class="back" onclick="goHome()">ãƒ›ãƒ¼ãƒ </div>
  <h1>ã‚³ãƒ³ãƒ‘ã‚¹</h1>
  <div id="deg" style="font-size:36px;margin-top:40px;">0Â°</div>
</div>

<!-- ===== ãƒ›ãƒ¼ãƒ«ãƒã‚¤ã‚¯ ===== -->
<div class="app" id="mic">
  <div class="back" onclick="goHome()">ãƒ›ãƒ¼ãƒ </div>
  <h1>ãƒ›ãƒ¼ãƒ«ãƒã‚¤ã‚¯</h1>
  <button onclick="startEcho()">ğŸ¤ é–‹å§‹</button>
</div>

<script>
/* ===== å…±é€š ===== */
function openApp(id){
  home.style.display="none";
  document.getElementById(id).style.display="block";
}
function goHome(){
  document.querySelectorAll(".app").forEach(a=>a.style.display="none");
  home.style.display="grid";
}

/* ===== æ™‚è¨ˆ ===== */
setInterval(()=>{
  const d=new Date();
  time.textContent=d.toLocaleTimeString("ja-JP");
},1000);

/* ===== è¨ˆç®—æ©Ÿ ===== */
function add(v){
  if(v==="="){
    calcDisp.value=eval(calcDisp.value);
  }else{
    calcDisp.value+=v;
  }
}

/* ===== ã‚³ãƒ³ãƒ‘ã‚¹ ===== */
if(window.DeviceOrientationEvent){
  window.addEventListener("deviceorientation",e=>{
    deg.textContent=Math.round(e.alpha||0)+"Â°";
  });
}

/* ===== ãƒ›ãƒ¼ãƒ«ãƒã‚¤ã‚¯ï¼ˆã‚¨ã‚³ãƒ¼100%ï¼‰ ===== */
async function startEcho(){
  const ctx=new AudioContext();
  const stream=await navigator.mediaDevices.getUserMedia({audio:true});
  const mic=ctx.createMediaStreamSource(stream);

  const delay=ctx.createDelay();
  delay.delayTime.value=0.35;

  const gain=ctx.createGain();
  gain.gain.value=0.95;

  mic.connect(delay);
  delay.connect(gain);
  gain.connect(delay);
  delay.connect(ctx.destination);
}
</script>

</body>
</html>
